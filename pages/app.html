---
layout: default
title: App
---

<style>
  :root {
    --bg-blue: #4666E5;
    --toggle-height: 20px;
    --toggle-width: 35px;
  }
  #interactive-graph {
    border: 3px solid black;
    border-radius: 10px;
    margin: 0 auto;
    top: 5%;
    width: 500px;
    height: 500px;
    overflow: hidden;
  }
  #startNode {
    border-color: black;
  }
  ul {
    list-style: none;
    display: flex;
    align-items: center;
  }

  li {
    display: inline-block;
    margin: 0 10px;
    position: relative;
  }
  li:after {
    content: 'â†’';
    position: absolute;
    right: -15px;
  }
  li:last-child:after {
    content: '';
  }
  input {
    background-color: #ececec77;
    border: solid;
    border-radius: 10px;
  }
</style>
<script>
  var nodes_array = [];
  var node_coords = [];
  var edge_array = [];
  var adj_array = [];
  var adj_List = [];
  var start = [];
  var end = [];
  var current_index = 0;

  function submit() {
    const startNode = document.getElementById('startNode').value
    const endNode = document.getElementById('endNode').value

    start.push(startNode)
    end.push(endNode)

    adj_List = Array(current_index).fill().map(() => Array(current_index).fill(10000));
    for (let i = 0; i < adj_array.length; i++) {
      adj_List[adj_array[i][0]][adj_array[i][1]] = adj_array[i][2];
      adj_List[adj_array[i][1]][adj_array[i][0]] = adj_array[i][2];
    }
    for (let i = 0; i < current_index; i ++){
      adj_List[i][i] = 0;
    }

    //fetch template

    // Sample JSON payload
    const payload = {
      adjacencyList: adj_List,
      source: parseInt(start),
      target: parseInt(end)
    };

    // Backend URL
    const backendURL = 'http://localhost:8084/api/dijkstra/';

    // Creating a new XMLHttpRequest object
    const xhr = new XMLHttpRequest();
    xhr.open('POST', backendURL, true);
    xhr.setRequestHeader('Content-Type', 'application/json');

    // Handling the response from the server
    xhr.onload = function() {
      if(xhr.status >= 200 && xhr.status < 300) {
        const response = JSON.parse(xhr.responseText);
        console.log('Response from server:', response);
        const responseContainer = document.getElementById('responseContainer');
        responseContainer.innerHTML = '';

        const ul = document.createElement('ul');
            ul.classList.add('arrows-list');
            response.forEach((item) => {
                const li = document.createElement('li');
                li.textContent = item;
                ul.appendChild(li);
            });

            responseContainer.appendChild(ul);
      } else {
        console.error('Request failed with status:', xhr.status);
      }
    };

    // Handling errors during the request
    xhr.onerror = function() {
      console.error('Request failed');
    };

    // Sending the request with the JSON payload
    xhr.send(JSON.stringify(payload));
  }
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.4.1/backbone.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.5/joint.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jointjs/dist/joint.min.css">
<script type="module" src="{{ site.baseurl }}/assets/scripts/graph.js"></script>
<div>
  <span id="zoom-out" class="btn">Zoom Out</span>
  <span id="zoom-in" class="btn">Zoom In</span>
</div>
<button class="btn" id="edit" onclick="setMode(editMode)">Edit Mode</button>
<div id="interactive-graph"></div>
<div>
  <p>Start: </p>
  <input type="integer" id="startNode" name="startNode">
  <p>End: </p>
  <input type="integer" id="endNode" name="endNode">
</div>
<button onclick="submit()" class="btn btn-ghost">Submit</button>
<div id="responseContainer"></div>